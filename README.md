# KIMPVIEW

KIMPVIEW는 **김치프리미엄(김프)**과 주요 암호화폐 가격 정보를  
여러 거래소 기준으로 한 화면에서 비교·분석할 수 있도록 만든  
**개인 포트폴리오 프로젝트**입니다.

---

## 📌 프로젝트 목적

- 거래소별 가격 차이를 한눈에 확인할 수 있는 화면 구성
- 프론트엔드 구조 설계 및 실시간 데이터 가공 로직 구현
- 단순 UI 구현이 아닌, **실사용을 고려한 화면 흐름 설계**

---


## ✨ 주요 기능

- Upbit / Bithumb 기준 원화 가격 테이블 제공
- Binance(USDT) 기준 가격을 환율로 환산하여 비교
- 김치프리미엄(%) 및 가격 차이(KRW) 자동 계산
- 즐겨찾기 / 검색 / 정렬(컬럼별) 지원
- 데이터 로딩 실패 시에도 화면이 깨지지 않도록 캐시 기반 fallback 렌더링 적용
- 실시간성 강화를 위해 **주기적 갱신 기반(Short TTL)** 데이터 업데이트 적용

---

## 🧩 구현/설계 포인트

- **UI 렌더링과 데이터 가공 로직 분리**
  - state 기반으로 필터/정렬/즐겨찾기 반영 후 렌더링
- **중복 API 호출 방지 및 체감 속도 개선**
  - localStorage 캐시(SWR 형태)로 초기 화면을 즉시 표시 후 백그라운드 갱신
  - 데이터 종류별 TTL 분리(가격/환율/시총/뉴스 등)
- **외부 API 제약(CORS/KEY 노출) 대응**
  - 프록시 서버(Cloudflare Worker)를 통해 외부 API 호출을 중계
- **에러/빈값 처리**
  - 값이 없을 때는 “-” 대신 빈칸 처리
  - 응답 지연/실패 시에도 테이블 구조가 유지되도록 방어 코드 적용  
    → 외부 API 상태와 무관하게 UI 안정성 확보
- 응답 지연/실패 시에도 테이블 구조가 유지되도록 방어 코드 적용  
  → 외부 API 상태와 무관하게 UI 안정성 확보

---

## 🛠 기술 스택

### Frontend
- HTML5 / CSS3 / Vanilla JavaScript

### Data Sources
- Upbit Open API
- Bithumb Open API
- Binance Public API

### Infra
- Cloudflare Workers (API Proxy / CORS / API Key 보호)
- localStorage Cache (SWR 형태)

## 🧪 트러블슈팅

### 1. 페이지 초기 로딩 시 화면이 비어 보이는 문제
- **문제**  
  외부 거래소 API 응답을 기다린 후에만 테이블을 렌더링하면서,  
  페이지 진입 시 짧은 시간 동안 화면이 비어 보이는 현상이 발생함.
- **원인**  
  초기 렌더링이 실시간 API 응답에 직접 의존하고 있었고,  
  네트워크 지연 시 UX가 크게 저하됨.
- **해결**  
  localStorage에 저장된 기존 데이터를 먼저 렌더링한 뒤,  
  백그라운드에서 최신 데이터를 갱신하는  
  SWR(Stale-While-Revalidate) 형태로 구조를 변경함.
- **결과**  
  페이지 진입 즉시 데이터가 표시되어 체감 로딩 속도가 개선되었고,  
  네트워크 상태와 무관하게 안정적인 초기 화면을 제공할 수 있게 됨.

---

### 2. 무료 API 크레딧 소모 및 호출 제한 문제
- **문제**  
  여러 거래소 및 지표 API를 동시에 호출하면서  
  무료 API 크레딧 소모가 빠르고 호출 제한(429/502)에 자주 도달함.
- **원인**  
  데이터 특성에 관계없이 동일한 주기로 API를 호출하고 있었으며,  
  동일 데이터에 대한 중복 요청이 발생하고 있었음.
- **해결**  
  데이터 성격에 따라 TTL을 분리한 캐싱 전략을 적용함.  
  - 가격 데이터: 짧은 TTL (실시간성 우선)  
  - 환율 / 시총 / 지표 데이터: 긴 TTL (정확성 우선)  
  또한 캐시된 데이터는 즉시 재사용하고,  
  백그라운드에서만 갱신하도록 구조를 개선함.
- **결과**  
  API 호출 횟수를 크게 줄이면서도 체감 실시간성은 유지할 수 있었고,  
  무료 크레딧 범위 내에서 안정적인 서비스 운영이 가능해짐.

---

### 3. 브라우저 CORS 정책으로 인한 외부 API 직접 호출 문제
- **문제**  
  브라우저 환경에서 외부 거래소 API를 직접 호출할 경우  
  CORS 정책으로 인해 요청이 차단되는 문제가 발생함.
- **원인**  
  다수의 외부 API가 브라우저 직접 호출을 허용하지 않으며,  
  API Key 노출 위험이 있는 구조였음.
- **해결**  
  Cloudflare Worker를 프록시 서버로 사용하여  
  외부 API 요청을 서버 단에서 중계하고,  
  CORS 헤더 설정 및 API Key를 안전하게 관리하도록 구조를 변경함.
- **결과**  
  브라우저 환경에서도 안정적인 API 통신이 가능해졌고,  
  보안 및 확장성을 고려한 백엔드 구조의 필요성을 명확히 인식하게 됨.

## 🔒 안내 사항

본 저장소의 코드는 개인 학습 및 포트폴리오 용도로 공개되어 있으며,  
상업적 활용 시 사전 협의가 필요합니다.

---

## 🚧 향후 계획

- Cloudflare Worker → **Spring Boot API 서버로 이관**
- 서버 캐시(Caffeine/Redis) + DB 저장(알림/히스토리) 구조 적용
- 김프 과열/청산 급증/시장 상태 지표를 서버에서 계산하여 제공
- 배포 환경 구성 및 모니터링 적용

---

## 🔗 링크

- GitHub Repository: https://github.com/maker3391/KIMPVIEW